# Default values for thermo-pilot-controller.

# -- Number of controller replicas
replicaCount: 1

image:
  # -- Container image repository
  repository: ghcr.io/seipan/thermo-pilot-controller
  # -- Container image pull policy
  pullPolicy: IfNotPresent
  # -- Overrides the image tag whose default is the chart appVersion.
  tag: ""

# -- Image pull secrets
imagePullSecrets: []
# -- Override name
nameOverride: ""
# -- Override full name
fullnameOverride: ""

serviceAccount:
  # -- Specifies whether a service account should be created
  create: true
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use.
  name: ""

# -- Pod annotations
podAnnotations: {}

# -- Pod security context
podSecurityContext:
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

# -- Container security context
securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
    - ALL

# -- Resource limits and requests
resources:
  limits:
    cpu: 500m
    memory: 128Mi
  requests:
    cpu: 10m
    memory: 64Mi

# -- Node selector
nodeSelector: {}

# -- Tolerations
tolerations: []

# -- Affinity rules
affinity: {}

# Pod Disruption Budget configuration
podDisruptionBudget:
  # -- Enable PodDisruptionBudget
  enabled: false
  # -- Minimum available pods during disruption
  minAvailable: 1
  # -- Maximum unavailable pods during disruption (mutually exclusive with minAvailable)
  maxUnavailable: ""

# Controller configuration
controller:
  # -- Enable leader election
  leaderElect: true
  # -- Health probe bind address
  healthProbeBindAddress: :8081
  # -- Metrics bind address
  metricsBindAddress: :8080
  # -- Enable metrics
  metricsSecure: true

# Probe configuration
probes:
  liveness:
    # -- Enable liveness probe
    enabled: true
    # -- Initial delay seconds
    initialDelaySeconds: 15
    # -- Period seconds
    periodSeconds: 20
    # -- Timeout seconds
    timeoutSeconds: 1
    # -- Success threshold
    successThreshold: 1
    # -- Failure threshold
    failureThreshold: 3
  readiness:
    # -- Enable readiness probe
    enabled: true
    # -- Initial delay seconds
    initialDelaySeconds: 5
    # -- Period seconds
    periodSeconds: 10
    # -- Timeout seconds
    timeoutSeconds: 1
    # -- Success threshold
    successThreshold: 1
    # -- Failure threshold
    failureThreshold: 3

# RBAC configuration
rbac:
  # -- Create RBAC resources
  create: true
  # -- Secret access configuration
  secretAccess:
    # -- Use namespace-scoped secret access (recommended for security)
    namespaced: true
    # -- Namespace where secrets can be accessed (defaults to release namespace)
    namespace: ""

# Monitoring configuration
monitoring:
  # -- Enable ServiceMonitor for Prometheus Operator
  enabled: false
  # -- ServiceMonitor labels
  labels: {}
  # -- ServiceMonitor scrape interval
  interval: 30s

# Example ThermoPilot configuration (not installed by default)
# Enable this to create a sample ThermoPilot resource
thermoPilot:
  # -- Enable example ThermoPilot resource
  enabled: false
  # -- Name of the ThermoPilot resource
  name: example-thermostat
  # -- Secret reference for SwitchBot credentials
  secretRef:
    name: switchbot-credentials
  # -- Temperature sensor type (MeterPro)
  temperatureSensorType: MeterPro
  # -- Target temperature
  targetTemperature: "25.0"
  # -- Temperature threshold
  threshold: "1.0"
  # -- Mode (cool or heat)
  mode: cool
  # -- Air conditioner device ID (optional)
  airConditionerId: ""